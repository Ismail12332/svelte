var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function s(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode&&e.parentNode.removeChild(e)}function i(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function u(){return d(" ")}function f(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function p(e,t){t=""+t,e.data!==t&&(e.data=t)}let v;function h(e){v=e}function b(){if(!v)throw new Error("Function called outside component initialization");return v}function g(e){b().$$.on_mount.push(e)}function $(){const e=b();return(t,n,{cancelable:o=!1}={})=>{const s=e.$$.callbacks[t];if(s){const l=function(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,o,t),s}(t,n,{cancelable:o});return s.slice().forEach((t=>{t.call(e,l)})),!l.defaultPrevented}return!0}}const y=[],x=[];let w=[];const _=[],C=Promise.resolve();let k=!1;function P(e){w.push(e)}const j=new Set;let E=0;function q(){if(0!==E)return;const e=v;do{try{for(;E<y.length;){const e=y[E];E++,h(e),S(e.$$)}}catch(e){throw y.length=0,E=0,e}for(h(null),y.length=0,E=0;x.length;)x.pop()();for(let e=0;e<w.length;e+=1){const t=w[e];j.has(t)||(j.add(t),t())}w.length=0}while(y.length);for(;_.length;)_.pop()();k=!1,j.clear(),h(e)}function S(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const T=new Set;let O;function N(){O={r:0,c:[],p:O}}function L(){O.r||o(O.c),O=O.p}function M(e,t){e&&e.i&&(T.delete(e),e.i(t))}function F(e,t,n,o){if(e&&e.o){if(T.has(e))return;T.add(e),O.c.push((()=>{T.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function A(e,t){e.d(1),t.delete(e.key)}function I(e){e&&e.c()}function H(e,n,l,a){const{fragment:r,after_update:c}=e.$$;r&&r.m(n,l),a||P((()=>{const n=e.$$.on_mount.map(t).filter(s);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),c.forEach(P)}function z(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];w.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),w=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function B(e,t){-1===e.$$.dirty[0]&&(y.push(e),k||(k=!0,C.then(q)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function R(t,s,l,a,r,i,d,u=[-1]){const f=v;h(t);const m=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||f.$$.root};d&&d(m.root);let p=!1;if(m.ctx=l?l(t,s.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&r(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),p&&B(t,e)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!a&&a(m.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);m.fragment&&m.fragment.l(e),e.forEach(c)}else m.fragment&&m.fragment.c();s.intro&&M(t.$$.fragment),H(t,s.target,s.anchor,s.customElement),q()}h(f)}class U{$destroy(){z(this,1),this.$destroy=e}$on(t,n){if(!s(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function V(e,t,n){const o=e.slice();return o[3]=t[n],o}function D(t){let n;return{c(){n=i("p"),n.textContent="У вас пока нет проектов.",m(n,"class","svelte-10ec303")},m(e,t){r(e,n,t)},p:e,d(e){e&&c(n)}}}function G(e){let t,n=[],s=new Map,l=e[0];const a=e=>e[3]._id;for(let t=0;t<l.length;t+=1){let o=V(e,l,t),r=a(o);s.set(r,n[t]=J(r,o))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=d("")},m(e,o){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,o);r(e,t,o)},p(e,r){1&r&&(l=e[0],n=function(e,t,n,s,l,a,r,c,i,d,u,f){let m=e.length,p=a.length,v=m;const h={};for(;v--;)h[e[v].key]=v;const b=[],g=new Map,$=new Map,y=[];for(v=p;v--;){const e=f(l,a,v),o=n(e);let c=r.get(o);c?s&&y.push((()=>c.p(e,t))):(c=d(o,e),c.c()),g.set(o,b[v]=c),o in h&&$.set(o,Math.abs(v-h[o]))}const x=new Set,w=new Set;function _(e){M(e,1),e.m(c,u),r.set(e.key,e),u=e.first,p--}for(;m&&p;){const t=b[p-1],n=e[m-1],o=t.key,s=n.key;t===n?(u=t.first,m--,p--):g.has(s)?!r.has(o)||x.has(o)?_(t):w.has(s)?m--:$.get(o)>$.get(s)?(w.add(o),_(t)):(x.add(s),m--):(i(n,r),m--)}for(;m--;){const t=e[m];g.has(t.key)||i(t,r)}for(;p;)_(b[p-1]);return o(y),b}(n,r,a,1,e,l,s,t.parentNode,A,J,t,V))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&c(t)}}}function J(e,t){let n,o,s,l,f,v,h,b,g,$,y,x,w,_,C,k,P,j,E,q,S,T,O,N,L,M,F,A,I,H,z,B,R,U,V,D=t[3].first_name+"",G=t[3].last_name+"",J=t[3].city+"",Y=t[3].phone+"",K=t[3].post+"",Q=t[3].created_at+"",W=t[3].vessel_name+"";return{key:e,first:null,c(){n=i("div"),o=i("a"),s=i("strong"),s.textContent="Name:",l=u(),f=d(D),v=u(),h=d(G),b=i("br"),$=u(),y=i("strong"),y.textContent="City:",x=u(),w=d(J),_=i("br"),C=u(),k=i("strong"),k.textContent="Phone:",P=u(),j=d(Y),E=i("br"),q=u(),S=i("strong"),S.textContent="Post:",T=u(),O=d(K),N=i("br"),L=u(),M=i("strong"),M.textContent="Time create:",F=u(),A=d(Q),I=i("br"),H=u(),z=i("p"),B=i("strong"),B.textContent="Vessel name:",R=u(),U=d(W),V=u(),m(o,"href",g=`/edit_project/${t[3]._id}`),m(z,"class","svelte-10ec303"),m(n,"class","project-info svelte-10ec303"),this.first=n},m(e,t){r(e,n,t),a(n,o),a(o,s),a(o,l),a(o,f),a(o,v),a(o,h),a(o,b),a(n,$),a(n,y),a(n,x),a(n,w),a(n,_),a(n,C),a(n,k),a(n,P),a(n,j),a(n,E),a(n,q),a(n,S),a(n,T),a(n,O),a(n,N),a(n,L),a(n,M),a(n,F),a(n,A),a(n,I),a(n,H),a(n,z),a(z,B),a(z,R),a(z,U),a(n,V)},p(e,n){t=e,1&n&&D!==(D=t[3].first_name+"")&&p(f,D),1&n&&G!==(G=t[3].last_name+"")&&p(h,G),1&n&&g!==(g=`/edit_project/${t[3]._id}`)&&m(o,"href",g),1&n&&J!==(J=t[3].city+"")&&p(w,J),1&n&&Y!==(Y=t[3].phone+"")&&p(j,Y),1&n&&K!==(K=t[3].post+"")&&p(O,K),1&n&&Q!==(Q=t[3].created_at+"")&&p(A,Q),1&n&&W!==(W=t[3].vessel_name+"")&&p(U,W)},d(e){e&&c(n)}}}function Y(t){let n,o,s,l,d,p,v,h,b,g,$,y,x,w,_,C,k,P;function j(e,t){return e[0].length>0?G:D}let E=j(t),q=E(t);return{c(){n=i("body"),o=i("h1"),o.textContent="Survzilla",s=u(),l=i("a"),l.textContent="Выйти",d=u(),p=i("form"),p.innerHTML='<div class="col-md-4"><label for="validationCustom01" class="form-label svelte-10ec303">First name</label> \n                <input type="text" class="form-control" id="validationCustom01" name="first_name" value="" required=""/> \n                <div class="valid-feedback">Looks good!</div></div> \n            <div class="col-md-4"><label for="validationCustom02" class="form-label svelte-10ec303">Last name</label> \n                <input type="text" class="form-control" id="validationCustom02" name="last_name" value="" required=""/> \n                <div class="valid-feedback">Looks good!</div></div> \n            <div class="col-md-4"><label for="validationCustomUsername" class="form-label svelte-10ec303">post</label> \n                <div class="input-group has-validation"><span class="input-group-text" id="inputGroupPrepend">@</span> \n                <input type="text" class="form-control" id="validationCustomUsername" name="post" aria-describedby="inputGroupPrepend" required=""/> \n                <div class="invalid-feedback">Please choose a username.</div></div></div> \n            <div class="col-md-6"><label for="validationCustom03" class="form-label svelte-10ec303">City</label> \n                <input type="text" class="form-control" id="validationCustom03" name="city" required=""/> \n                <div class="invalid-feedback">Please provide a valid city.</div></div> \n            <div class="col-md-3"><label for="validationCustom04" class="form-label svelte-10ec303">Vessel Name</label> \n                <input type="text" class="form-control" id="validationCustom04" name="vessel_name" required=""/> \n                <div class="invalid-feedback">Please enter a valid vessel name.</div></div> \n            <div class="col-md-3"><label for="validationCustom05" class="form-label svelte-10ec303">Phone</label> \n                <input type="text" class="form-control" id="validationCustom05" name="phone" required=""/> \n                <div class="invalid-feedback">Please provide a valid phone.</div></div> \n            <div class="col-12"><div class="form-check"><input class="form-check-input" type="checkbox" value="" id="invalidCheck" required=""/> \n                <label class="form-check-label svelte-10ec303" for="invalidCheck">Agree to terms and conditions</label> \n                <div class="invalid-feedback">You must agree before submitting.</div></div></div> \n            <div class="col-12"><button id="createProjectBtn" class="btn btn-primary" type="submit">Create a new Project</button></div>',v=u(),h=i("h1"),h.textContent="Добро пожаловать!",b=u(),g=i("h2"),g.textContent="Ваши проекты:",$=u(),y=i("ul"),q.c(),x=u(),w=i("form"),_=i("div"),C=i("button"),C.textContent="Create a new Project",m(o,"class","svelte-10ec303"),m(l,"href","/logout"),m(l,"class","btn btn-danger"),m(p,"class","row g-3 needs-validation svelte-10ec303"),m(p,"method","POST"),p.noValidate=!0,m(p,"action","/index2"),m(h,"class","svelte-10ec303"),m(g,"class","svelte-10ec303"),m(C,"type","button"),m(C,"class","btn btn-primary"),m(_,"class","col-12"),m(w,"id","projectForm"),m(w,"class","row g-3 svelte-10ec303"),m(w,"method","POST"),m(w,"action","/index2"),m(y,"class","svelte-10ec303"),m(n,"class","svelte-10ec303")},m(e,c){r(e,n,c),a(n,o),a(n,s),a(n,l),a(n,d),a(n,p),a(n,v),a(n,h),a(n,b),a(n,g),a(n,$),a(n,y),q.m(y,null),a(y,x),a(y,w),a(w,_),a(_,C),k||(P=f(C,"click",t[1]),k=!0)},p(e,[t]){E===(E=j(e))&&q?q.p(e,t):(q.d(1),q=E(e),q&&(q.c(),q.m(y,x)))},i:e,o:e,d(e){e&&c(n),q.d(),k=!1,P()}}}function K(e,t,n){let o=[];return g((async()=>{const e=await fetch("/get_projects"),t=await e.json();n(0,o=t.projects),t.user_id})),[o,async()=>{const e=new FormData(document.getElementById("projectForm"));try{const t=await fetch("/index2",{method:"POST",body:e});if(t.ok){const e=await t.json();window.location.href=`/edit_project/${e.project_id}`}else console.error("Error submitting form")}catch(e){console.error("Error submitting form:",e)}}]}class Q extends U{constructor(e){super(),R(this,e,K,Y,l,{})}}function W(t){let n,o,s;return{c(){n=i("head"),n.innerHTML='<meta charset="UTF-8"/> \n    <meta name="viewport" content="width=device-width, initial-scale=1.0"/> \n    <title>Вход</title>',o=u(),s=i("body"),s.innerHTML='<h1 class="svelte-viol35">Survzila</h1> \n    <h1 class="svelte-viol35">Please</h1> \n    <form method="POST" action="/"><label for="username" class="svelte-viol35">Name:</label> \n        <input type="text" id="username" name="username" required="" class="svelte-viol35"/><br/> \n\n        <label for="password" class="svelte-viol35">Password:</label> \n        <input type="password" id="password" name="password" required="" class="svelte-viol35"/><br/> \n\n        <button type="submit" class="svelte-viol35">Sign in</button></form>',m(s,"class","svelte-viol35")},m(e,t){r(e,n,t),r(e,o,t),r(e,s,t)},p:e,i:e,o:e,d(e){e&&c(n),e&&c(o),e&&c(s)}}}function X(e){return[]}class Z extends U{constructor(e){super(),R(this,e,X,W,l,{})}}function ee(t){let n,o,s,l,d,p,v,h,b;return{c(){n=i("body"),o=i("div"),s=i("h1"),s.textContent="Register",l=u(),d=i("form"),d.innerHTML='<label for="username" class="svelte-1lsh8x">Name:</label> \n            <input type="text" id="username" name="username" required="" class="svelte-1lsh8x"/><br/> \n\n            <label for="password" class="svelte-1lsh8x">password:</label> \n            <input type="password" id="password" name="password" required="" class="svelte-1lsh8x"/><br/> \n\n            <label for="email" class="svelte-1lsh8x">Email:</label> \n            <input type="email" id="email" name="email" required="" class="svelte-1lsh8x"/><br/> \n\n            <button type="submit" class="svelte-1lsh8x">Register</button>',p=u(),v=i("button"),v.textContent="Close",m(d,"method","POST"),m(d,"action","/register"),m(v,"class","svelte-1lsh8x"),m(o,"class","modal svelte-1lsh8x"),m(n,"class","svelte-1lsh8x")},m(e,c){r(e,n,c),a(n,o),a(o,s),a(o,l),a(o,d),a(o,p),a(o,v),h||(b=f(v,"click",t[0]),h=!0)},p:e,i:e,o:e,d(e){e&&c(n),h=!1,b()}}}function te(e){const t=$();return[function(){t("close")}]}class ne extends U{constructor(e){super(),R(this,e,te,ee,l,{})}}function oe(t){let n,o,s,l,a,d;return n=new Z({}),n.$on("login",t[2]),{c(){I(n.$$.fragment),o=u(),s=i("button"),s.textContent="Register",m(s,"class","svelte-pqol5y")},m(e,c){H(n,e,c),r(e,o,c),r(e,s,c),l=!0,a||(d=f(s,"click",t[3]),a=!0)},p:e,i(e){l||(M(n.$$.fragment,e),l=!0)},o(e){F(n.$$.fragment,e),l=!1},d(e){z(n,e),e&&c(o),e&&c(s),a=!1,d()}}}function se(e){let t,n;return t=new Q({}),{c(){I(t.$$.fragment)},m(e,o){H(t,e,o),n=!0},i(e){n||(M(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function le(t){let n,o;return n=new ne({}),n.$on("click",t[4]),n.$on("close",t[5]),{c(){I(n.$$.fragment)},m(e,t){H(n,e,t),o=!0},p:e,i(e){o||(M(n.$$.fragment,e),o=!0)},o(e){F(n.$$.fragment,e),o=!1},d(e){z(n,e)}}}function ae(e){let t,n,o,s,l=!e[1]&&oe(e),d=e[1]&&se(),f=e[0]&&le(e);return{c(){t=i("main"),l&&l.c(),n=u(),d&&d.c(),o=u(),f&&f.c(),m(t,"class","svelte-pqol5y")},m(e,c){r(e,t,c),l&&l.m(t,null),a(t,n),d&&d.m(t,null),a(t,o),f&&f.m(t,null),s=!0},p(e,[s]){e[1]?l&&(N(),F(l,1,1,(()=>{l=null})),L()):l?(l.p(e,s),2&s&&M(l,1)):(l=oe(e),l.c(),M(l,1),l.m(t,n)),e[1]?d?2&s&&M(d,1):(d=se(),d.c(),M(d,1),d.m(t,o)):d&&(N(),F(d,1,1,(()=>{d=null})),L()),e[0]?f?(f.p(e,s),1&s&&M(f,1)):(f=le(e),f.c(),M(f,1),f.m(t,null)):f&&(N(),F(f,1,1,(()=>{f=null})),L())},i(e){s||(M(l),M(d),M(f),s=!0)},o(e){F(l),F(d),F(f),s=!1},d(e){e&&c(t),l&&l.d(),d&&d.d(),f&&f.d()}}}function re(e,t,n){let o=!1,s=!1;g((async()=>{const e=await fetch("/check_login_status"),t=await e.json();"loggedIn"in t?n(1,s=t.loggedIn):console.error("Invalid response format")}));return[o,s,async e=>{e.preventDefault();const t=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.target.username.value,password:e.target.password.value})}),o=await t.json();o.loggedIn?n(1,s=!0):alert(o.message||"Неправильное имя пользователя или пароль.")},()=>n(0,o=!0),()=>n(0,o=!1),()=>n(0,o=!1)]}return new class extends U{constructor(e){super(),R(this,e,re,ae,l,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
